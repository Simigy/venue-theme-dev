
<!-- CART POPUP WITH REAL DATA -->
<style>
  #simpleCart {
    position: fixed;
    top: 0;
    right: -500px;
    width: 500px;
    height: 100vh;
    background: #FFF;
    box-shadow: -4px 0 16px 0 rgba(0, 0, 0, 0.08);
    z-index: 10000;
    transition: right 0.3s ease;
    font-family: system-ui, sans-serif;
    display: flex;
    flex-direction: column;
  }
  #simpleCart.open {
    right: 0;
  }
  #simpleOverlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 9999;
    display: none;
  }
  #simpleOverlay.active {
    display: block;
  }
  .cart-content {
    flex: 1;
    overflow-y: auto;
    padding: 0;
  }

.progress-container {
  width: 100%;
  max-width: 500px; 
  margin: 0 auto;
  position: relative;
}

.progress-wrapper {
  width: 98%;
  height: 4px;
  background: #B7A99A;
  border-radius: 2px;
  position: relative;
  z-index: 0;
}

#freeShippingProgress {
  height: 100%;
  background: #013D35;
  width: 20%; /* controlled by JS */
  transition: width 0.3s;
}

.progress-milestones {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.milestone {
  text-align: center;
  position: relative;
}

.milestone-icon {
  width: 28px;
  height: 28px;
  border: 2px solid #013D35;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fff;
  position: absolute;
  top: -16px; 
  left: 50%;
  transform: translateX(-50%);
}

/* Responsive styles for screens below 500px */
  @media (max-width: 501px) {
    #simpleCart {
      width: 100vw;
      right: -100vw;
    }
    
    #simpleCart.open {
      right: 0;
    }
    
    .progress-container {
      max-width: 100%;
     
    }
    
    .progress-wrapper {
      width: 97%;
    }
    
    .milestone-icon {
      width: 24px;
      height: 24px;
      top: -14px;
    }
    
    .milestone-icon svg {
      width: 14px;
      height: 14px;
    }
    
    .milestone span {
      font-size: 11px;
    }
    
    /* Adjust cart item layout for mobile */
    .cart-content > div {
      padding: 16px !important;
    }
    
    .cart-content > div > div {
      gap: 12px !important;
    }
    
    .cart-content img {
      width: 60px !important;
      height: 60px !important;
    }
    
    /* Adjust footer padding */
    #simpleCart > div:last-child {
      padding: 16px !important;
    }
    
    /* Adjust header padding */
    #simpleCart > div:first-child {
      padding: 20px 16px 12px 16px !important;
    }
    
    /* Adjust free shipping section padding */
    #simpleCart > div:nth-child(2) {
      padding: 12px 16px !important;
    }
  }

  /* Additional adjustments for very small screens */
  @media (max-width: 360px) {
    .milestone-icon {
      width: 20px;
      height: 20px;
      top: -12px;
    }
    
    .milestone-icon svg {
      width: 12px;
      height: 12px;
    }
    
    .milestone span {
      font-size: 10px;
    }
    
    .cart-content img {
      width: 50px !important;
      height: 50px !important;
    }
  }
</style>

<div id="simpleCart">
  <!-- Header -->
  <div style="padding: 24px 20px 16px 20px; border-bottom: 1px solid #CED5D4 !important;">
    <h2
      style="
        color: #013D35; margin: 0; font-size: 22.8px; font-weight: 400; text-align: left; font-family: Poppins;
        font-style: normal;
        line-height: normal;
      "
    >
      Din kurv
    </h2>
    <button
      onclick="closeSimpleCart()"
      style="position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 24px; cursor: pointer; color: #666;"
    >
      ×
    </button>
  </div>

  <!-- Free Shipping -->
<div style="padding: 16px 24px;">
  <!-- Text -->
  <div style="font-size: 13px; color: #000; margin-bottom: 8px; font-weight: 500; display: flex; align-items: center; justify-content: flex-start;
    gap: 4px; 
">
   <svg style="display: inline-block;
    vertical-align: middle;
    margin-top: 2px;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M14.8991 7.68369C14.8962 7.67461 14.8927 7.66572 14.8886 7.65708L14.1072 5.98221C14.0141 5.71178 13.8389 5.47718 13.6061 5.31114C13.3732 5.1451 13.0943 5.05591 12.8083 5.05603H10.8012C10.8309 4.92079 10.8298 4.78063 10.7982 4.64584C10.7665 4.51106 10.7051 4.38508 10.6183 4.27717C10.5316 4.16926 10.4218 4.08217 10.2969 4.02229C10.1721 3.96241 10.0354 3.93127 9.89699 3.93115H2.64432C2.61149 3.93115 2.57898 3.93762 2.54865 3.95018C2.51833 3.96274 2.49077 3.98116 2.46756 4.00437C2.44434 4.02758 2.42593 4.05514 2.41337 4.08547C2.40081 4.11579 2.39434 4.1483 2.39434 4.18113C2.39434 4.21395 2.40081 4.24646 2.41337 4.27679C2.42593 4.30712 2.44434 4.33467 2.46756 4.35789C2.49077 4.3811 2.51833 4.39951 2.54865 4.41207C2.57898 4.42464 2.61149 4.4311 2.64432 4.4311H9.89699C9.95857 4.43153 10.0193 4.44526 10.0751 4.47135C10.1309 4.49744 10.1804 4.53528 10.2202 4.58227C10.26 4.62926 10.2892 4.68429 10.3057 4.74361C10.3223 4.80292 10.3258 4.86511 10.3161 4.92592L9.54716 9.53945C9.53783 9.60416 9.55421 9.66994 9.5928 9.72271C9.63139 9.77548 9.68911 9.81103 9.75359 9.82175C9.81808 9.83248 9.8842 9.81752 9.93778 9.78008C9.99137 9.74264 10.0282 9.68569 10.0403 9.62145L10.7179 5.55599H12.8083C12.9968 5.55661 13.1801 5.61768 13.3313 5.73021C13.4825 5.84274 13.5936 6.0008 13.6483 6.18117L14.4292 7.85482C14.4717 7.98646 14.4932 8.12394 14.4932 8.26225V9.80554C14.493 9.97783 14.4245 10.143 14.3026 10.2648C14.1808 10.3867 14.0156 10.4552 13.8433 10.4554H13.3944C13.3335 10.1418 13.1653 9.85929 12.9188 9.65614C12.6723 9.45299 12.3629 9.3419 12.0435 9.3419C11.7241 9.34191 11.4146 9.45301 11.1681 9.65616C10.9216 9.85932 10.7535 10.1419 10.6925 10.4554L5.97017 10.4554C5.9097 10.1414 5.74176 9.85832 5.49522 9.65473C5.24868 9.45115 4.93893 9.33979 4.61919 9.33979C4.29946 9.3398 3.98971 9.45116 3.74318 9.65475C3.49664 9.85834 3.32871 10.1414 3.26824 10.4554L2.59452 10.4554C2.56162 10.4553 2.52903 10.4617 2.49861 10.4742C2.46819 10.4867 2.44054 10.5051 2.41725 10.5283C2.39395 10.5515 2.37547 10.5791 2.36285 10.6095C2.35024 10.6399 2.34375 10.6725 2.34375 10.7053C2.34375 10.7382 2.35024 10.7708 2.36285 10.8012C2.37547 10.8316 2.39395 10.8592 2.41725 10.8824C2.44054 10.9056 2.46819 10.924 2.49861 10.9365C2.52903 10.949 2.56162 10.9554 2.59452 10.9553H3.26824C3.32922 11.2689 3.49737 11.5514 3.74385 11.7546C3.99033 11.9577 4.2998 12.0688 4.61922 12.0688C4.93863 12.0688 5.2481 11.9577 5.49458 11.7546C5.74105 11.5514 5.90919 11.2688 5.97016 10.9553L10.6925 10.9553C10.9732 12.4381 13.1127 12.4408 13.3944 10.9553L13.8433 10.9553C14.1482 10.955 14.4404 10.8337 14.656 10.6182C14.8715 10.4026 14.9928 10.1104 14.9931 9.80554C14.9701 9.37174 15.0644 8.08059 14.8991 7.68369ZM4.61921 11.5803C4.38884 11.5777 4.16879 11.4844 4.0068 11.3206C3.84481 11.1568 3.75395 10.9357 3.75396 10.7053C3.75396 10.475 3.84482 10.2539 4.00682 10.0901C4.16881 9.92629 4.38888 9.83299 4.61924 9.83044C4.8496 9.833 5.06965 9.9263 5.23164 10.0901C5.39364 10.2539 5.48449 10.475 5.48448 10.7054C5.48448 10.9357 5.39362 11.1568 5.23162 11.3206C5.06963 11.4844 4.84957 11.5777 4.61921 11.5803ZM12.0435 11.5803C11.8131 11.5777 11.5931 11.4844 11.4311 11.3206C11.2691 11.1568 11.1782 10.9357 11.1782 10.7053C11.1782 10.475 11.2691 10.2539 11.4311 10.0901C11.5931 9.92629 11.8132 9.83299 12.0435 9.83044C12.2739 9.833 12.4939 9.9263 12.6559 10.0901C12.8179 10.2539 12.9088 10.475 12.9088 10.7054C12.9088 10.9357 12.8179 11.1568 12.6559 11.3206C12.4939 11.4844 12.2738 11.5777 12.0435 11.5803Z" fill="black"/>
  <path d="M13.2983 8.50584C13.3965 8.50467 13.4928 8.47909 13.5786 8.43141C13.6644 8.38374 13.737 8.31546 13.7899 8.23273C13.8427 8.15 13.8741 8.05543 13.8813 7.95753C13.8885 7.85962 13.8712 7.76148 13.831 7.67193L13.2302 6.21897C13.1911 6.13981 13.1306 6.07321 13.0555 6.02673C12.9804 5.98026 12.8938 5.95577 12.8055 5.95606H11.1445C11.1117 5.95604 11.0792 5.96249 11.0488 5.97505C11.0185 5.9876 10.9909 6.00601 10.9677 6.02923C10.9445 6.05245 10.9261 6.08001 10.9135 6.11035C10.901 6.14068 10.8945 6.1732 10.8945 6.20603V8.25587C10.8945 8.2887 10.901 8.32121 10.9135 8.35155C10.9261 8.38189 10.9445 8.40945 10.9677 8.43267C10.9909 8.45588 11.0185 8.47429 11.0488 8.48685C11.0792 8.49941 11.1117 8.50586 11.1445 8.50584H13.2983ZM11.3945 6.456H12.7879L13.3764 7.8792C13.3837 7.89246 13.3874 7.90742 13.387 7.92255C13.3866 7.93767 13.3823 7.95243 13.3743 7.96531C13.3664 7.9782 13.3552 7.98874 13.3418 7.99587C13.3285 8.003 13.3135 8.00646 13.2983 8.0059H11.3945V6.456Z" fill="black"/>
  <path d="M2.14188 5.581L4.84179 5.59907C4.9073 5.5983 4.96988 5.57186 5.01609 5.52542C5.0623 5.47899 5.08844 5.41627 5.08889 5.35076C5.08934 5.28526 5.06406 5.22219 5.01849 5.17513C4.97292 5.12807 4.9107 5.10077 4.84521 5.09911L2.14359 5.08105C2.07828 5.08233 2.01606 5.10912 1.97025 5.15568C1.92444 5.20224 1.89866 5.26488 1.89844 5.3302C1.89822 5.39552 1.92356 5.45833 1.96906 5.5052C2.01455 5.55207 2.07658 5.57928 2.14188 5.581Z" fill="black"/>
  <path d="M4.34626 6.44873L1.24651 6.43066C1.18107 6.43158 1.11859 6.45813 1.0725 6.5046C1.02642 6.55107 1.00039 6.61376 1 6.67921C0.999623 6.74466 1.02492 6.80765 1.07046 6.85465C1.11601 6.90166 1.17817 6.92893 1.2436 6.93061L4.34482 6.94868C4.41013 6.94737 4.47234 6.92056 4.51814 6.87398C4.56393 6.82739 4.58968 6.76473 4.58987 6.69941C4.59006 6.63408 4.56467 6.57128 4.51914 6.52443C4.47362 6.47758 4.41156 6.45041 4.34626 6.44873Z" fill="black"/>
  <path d="M3.84628 7.79883C3.8436 7.79883 2.14608 7.7807 2.1436 7.78076C2.07837 7.78204 2.01622 7.80876 1.97042 7.85522C1.92462 7.90168 1.89879 7.96419 1.89844 8.02943C1.89809 8.09467 1.92325 8.15746 1.96856 8.20441C2.01386 8.25135 2.07572 8.27874 2.14093 8.28071C2.14361 8.28071 3.84113 8.29882 3.84361 8.29877C3.90884 8.2975 3.97099 8.27078 4.01679 8.22432C4.06259 8.17786 4.08842 8.11534 4.08877 8.0501C4.08912 7.98486 4.06396 7.92207 4.01865 7.87513C3.97335 7.82818 3.91149 7.8008 3.84628 7.79883Z" fill="black"/>
</svg>
    <span id="freeShippingText" style="font-size: 13px; font-weight: 500;">
      101 kr. væk fra gratis fragt
    </span>
  </div>
<div class="progress-container">
 <!-- Progress wrapper -->
<div class="progress-wrapper">
  <!-- Filled bar -->
  <div id="freeShippingProgress" style="height: 100%; background: #013D35; width: 20%; transition: width 0.3s;"></div>
</div>


  <!-- Milestones - Fixed positioning -->
  <div class="progress-milestones" style="position: relative; margin-top: 12px; display: flex; justify-content: space-between; align-items: center; width: 100%;">
    <!-- 500 kr -->
    <div class="milestone" style="text-align: center; position: relative; transform: translateX(-50%); left: 50%;">
      <div class="milestone-icon" style="width: 28px; height: 28px; border: 2px solid #013D35; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto; background: #fff;     top: -28px;
    position: absolute;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M14.8991 7.68369C14.8962 7.67461 14.8927 7.66572 14.8886 7.65708L14.1072 5.98221C14.0141 5.71178 13.8389 5.47718 13.6061 5.31114C13.3732 5.1451 13.0943 5.05591 12.8083 5.05603H10.8012C10.8309 4.92079 10.8298 4.78063 10.7982 4.64584C10.7665 4.51106 10.7051 4.38508 10.6183 4.27717C10.5316 4.16926 10.4218 4.08217 10.2969 4.02229C10.1721 3.96241 10.0354 3.93127 9.89699 3.93115H2.64432C2.61149 3.93115 2.57898 3.93762 2.54865 3.95018C2.51833 3.96274 2.49077 3.98116 2.46756 4.00437C2.44434 4.02758 2.42593 4.05514 2.41337 4.08547C2.40081 4.11579 2.39434 4.1483 2.39434 4.18113C2.39434 4.21395 2.40081 4.24646 2.41337 4.27679C2.42593 4.30712 2.44434 4.33467 2.46756 4.35789C2.49077 4.3811 2.51833 4.39951 2.54865 4.41207C2.57898 4.42464 2.61149 4.4311 2.64432 4.4311H9.89699C9.95857 4.43153 10.0193 4.44526 10.0751 4.47135C10.1309 4.49744 10.1804 4.53528 10.2202 4.58227C10.26 4.62926 10.2892 4.68429 10.3057 4.74361C10.3223 4.80292 10.3258 4.86511 10.3161 4.92592L9.54716 9.53945C9.53783 9.60416 9.55421 9.66994 9.5928 9.72271C9.63139 9.77548 9.68911 9.81103 9.75359 9.82175C9.81808 9.83248 9.8842 9.81752 9.93778 9.78008C9.99137 9.74264 10.0282 9.68569 10.0403 9.62145L10.7179 5.55599H12.8083C12.9968 5.55661 13.1801 5.61768 13.3313 5.73021C13.4825 5.84274 13.5936 6.0008 13.6483 6.18117L14.4292 7.85482C14.4717 7.98646 14.4932 8.12394 14.4932 8.26225V9.80554C14.493 9.97783 14.4245 10.143 14.3026 10.2648C14.1808 10.3867 14.0156 10.4552 13.8433 10.4554H13.3944C13.3335 10.1418 13.1653 9.85929 12.9188 9.65614C12.6723 9.45299 12.3629 9.3419 12.0435 9.3419C11.7241 9.34191 11.4146 9.45301 11.1681 9.65616C10.9216 9.85932 10.7535 10.1419 10.6925 10.4554L5.97017 10.4554C5.9097 10.1414 5.74176 9.85832 5.49522 9.65473C5.24868 9.45115 4.93893 9.33979 4.61919 9.33979C4.29946 9.3398 3.98971 9.45116 3.74318 9.65475C3.49664 9.85834 3.32871 10.1414 3.26824 10.4554L2.59452 10.4554C2.56162 10.4553 2.52903 10.4617 2.49861 10.4742C2.46819 10.4867 2.44054 10.5051 2.41725 10.5283C2.39395 10.5515 2.37547 10.5791 2.36285 10.6095C2.35024 10.6399 2.34375 10.6725 2.34375 10.7053C2.34375 10.7382 2.35024 10.7708 2.36285 10.8012C2.37547 10.8316 2.39395 10.8592 2.41725 10.8824C2.44054 10.9056 2.46819 10.924 2.49861 10.9365C2.52903 10.949 2.56162 10.9554 2.59452 10.9553H3.26824C3.32922 11.2689 3.49737 11.5514 3.74385 11.7546C3.99033 11.9577 4.2998 12.0688 4.61922 12.0688C4.93863 12.0688 5.2481 11.9577 5.49458 11.7546C5.74105 11.5514 5.90919 11.2688 5.97016 10.9553L10.6925 10.9553C10.9732 12.4381 13.1127 12.4408 13.3944 10.9553L13.8433 10.9553C14.1482 10.955 14.4404 10.8337 14.656 10.6182C14.8715 10.4026 14.9928 10.1104 14.9931 9.80554C14.9701 9.37174 15.0644 8.08059 14.8991 7.68369ZM4.61921 11.5803C4.38884 11.5777 4.16879 11.4844 4.0068 11.3206C3.84481 11.1568 3.75395 10.9357 3.75396 10.7053C3.75396 10.475 3.84482 10.2539 4.00682 10.0901C4.16881 9.92629 4.38888 9.83299 4.61924 9.83044C4.8496 9.833 5.06965 9.9263 5.23164 10.0901C5.39364 10.2539 5.48449 10.475 5.48448 10.7054C5.48448 10.9357 5.39362 11.1568 5.23162 11.3206C5.06963 11.4844 4.84957 11.5777 4.61921 11.5803ZM12.0435 11.5803C11.8131 11.5777 11.5931 11.4844 11.4311 11.3206C11.2691 11.1568 11.1782 10.9357 11.1782 10.7053C11.1782 10.475 11.2691 10.2539 11.4311 10.0901C11.5931 9.92629 11.8132 9.83299 12.0435 9.83044C12.2739 9.833 12.4939 9.9263 12.6559 10.0901C12.8179 10.2539 12.9088 10.475 12.9088 10.7054C12.9088 10.9357 12.8179 11.1568 12.6559 11.3206C12.4939 11.4844 12.2738 11.5777 12.0435 11.5803Z" fill="#013D35"/>
  <path d="M13.2983 8.50584C13.3965 8.50467 13.4928 8.47909 13.5786 8.43141C13.6644 8.38374 13.737 8.31546 13.7899 8.23273C13.8427 8.15 13.8741 8.05543 13.8813 7.95753C13.8885 7.85962 13.8712 7.76148 13.831 7.67193L13.2302 6.21897C13.1911 6.13981 13.1306 6.07321 13.0555 6.02673C12.9804 5.98026 12.8938 5.95577 12.8055 5.95606H11.1445C11.1117 5.95604 11.0792 5.96249 11.0488 5.97505C11.0185 5.9876 10.9909 6.00601 10.9677 6.02923C10.9445 6.05245 10.9261 6.08001 10.9135 6.11035C10.901 6.14068 10.8945 6.1732 10.8945 6.20603V8.25587C10.8945 8.2887 10.901 8.32121 10.9135 8.35155C10.9261 8.38189 10.9445 8.40945 10.9677 8.43267C10.9909 8.45588 11.0185 8.47429 11.0488 8.48685C11.0792 8.49941 11.1117 8.50586 11.1445 8.50584H13.2983ZM11.3945 6.456H12.7879L13.3764 7.8792C13.3837 7.89246 13.3874 7.90742 13.387 7.92255C13.3866 7.93767 13.3823 7.95243 13.3743 7.96531C13.3664 7.9782 13.3552 7.98874 13.3418 7.99587C13.3285 8.003 13.3135 8.00646 13.2983 8.0059H11.3945V6.456Z" fill="#013D35"/>
  <path d="M2.14188 5.581L4.84179 5.59907C4.9073 5.5983 4.96988 5.57186 5.01609 5.52542C5.0623 5.47899 5.08844 5.41627 5.08889 5.35076C5.08934 5.28526 5.06406 5.22219 5.01849 5.17513C4.97292 5.12807 4.9107 5.10077 4.84521 5.09911L2.14359 5.08105C2.07828 5.08233 2.01606 5.10912 1.97025 5.15568C1.92444 5.20224 1.89866 5.26488 1.89844 5.3302C1.89822 5.39552 1.92356 5.45833 1.96906 5.5052C2.01455 5.55207 2.07658 5.57928 2.14188 5.581Z" fill="#013D35"/>
  <path d="M4.34626 6.44873L1.24651 6.43066C1.18107 6.43158 1.11859 6.45813 1.0725 6.5046C1.02642 6.55107 1.00039 6.61376 1 6.67921C0.999623 6.74466 1.02492 6.80765 1.07046 6.85465C1.11601 6.90166 1.17817 6.92893 1.2436 6.93061L4.34482 6.94868C4.41013 6.94737 4.47234 6.92056 4.51814 6.87398C4.56393 6.82739 4.58968 6.76473 4.58987 6.69941C4.59006 6.63408 4.56467 6.57128 4.51914 6.52443C4.47362 6.47758 4.41156 6.45041 4.34626 6.44873Z" fill="#013D35"/>
  <path d="M3.84628 7.79883C3.8436 7.79883 2.14608 7.7807 2.1436 7.78076C2.07837 7.78204 2.01622 7.80876 1.97042 7.85522C1.92462 7.90168 1.89879 7.96419 1.89844 8.02943C1.89809 8.09467 1.92325 8.15746 1.96856 8.20441C2.01386 8.25135 2.07572 8.27874 2.14093 8.28071C2.14361 8.28071 3.84113 8.29882 3.84361 8.29877C3.90884 8.2975 3.97099 8.27078 4.01679 8.22432C4.06259 8.17786 4.08842 8.11534 4.08877 8.0501C4.08912 7.98486 4.06396 7.92207 4.01865 7.87513C3.97335 7.82818 3.91149 7.8008 3.84628 7.79883Z" fill="#013D35"/>
</svg>
      </div>
      <span style="font-size: 12px; color: #000; display: block; margin-top: 4px;">500 kr.</span>
    </div>

    <!-- 1000 kr -->
    <div class="milestone" style="text-align: center;">
      <div class="milestone-icon" style="width: 28px; height: 28px; border: 2px solid #013D35; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto; background: #fff;     top: -28px;
    position: absolute;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M9.85938 0.956055C9.87495 0.960304 9.89019 0.967397 9.9043 0.975586C9.93355 0.99267 9.95577 1.01712 9.97168 1.04395L9.97266 1.0459C10.033 1.15742 10.3041 1.77104 10.5586 2.57812C10.8131 3.38538 11.053 4.39202 11.0498 5.28809C11.0517 6.38798 10.7165 7.40859 10.1016 8.14648C9.48855 8.88202 8.65856 9.2911 7.69531 9.33984L7.70215 13.7246L9.62598 14.6758C9.66461 14.6949 9.69551 14.7275 9.71387 14.7666C9.73208 14.8056 9.73673 14.8495 9.72754 14.8916C9.71829 14.9339 9.69535 14.9725 9.66211 15C9.62899 15.0272 9.58771 15.0419 9.54492 15.042L5.48926 15.0498C5.44626 15.0499 5.40443 15.0351 5.37109 15.0078C5.33781 14.9805 5.31412 14.9425 5.30469 14.9004C5.29529 14.8582 5.30019 14.8136 5.31836 14.7744C5.33658 14.7352 5.36769 14.7028 5.40625 14.6836L7.3252 13.7246L7.31836 9.34082C6.3551 9.2955 5.52462 8.88837 4.90918 8.15527C4.29168 7.4197 3.95213 6.40049 3.9502 5.30078C3.94373 4.40321 4.18026 3.39643 4.43164 2.58887C4.68295 1.78157 4.95112 1.16754 5.01172 1.05469L5.0127 1.05273C5.02929 1.02448 5.05287 1.0009 5.08105 0.984375C5.10927 0.967864 5.14118 0.959195 5.17383 0.958984L9.81055 0.950195L9.85938 0.956055ZM6.30762 14.6621L8.72461 14.6582L7.51465 14.0596L6.30762 14.6621ZM7.12793 5.02832C6.43055 4.58869 5.73949 4.49184 5.07031 4.7334C4.79866 4.83128 4.54695 4.98002 4.32715 5.17188C4.32636 5.21416 4.32588 5.25986 4.32617 5.2998V5.30078C4.32801 6.31241 4.63784 7.24141 5.19434 7.9043C5.77588 8.59712 6.57477 8.96268 7.50684 8.96094C8.43866 8.95907 9.23536 8.59032 9.81445 7.89551C10.3686 7.23055 10.6755 6.29888 10.6738 5.28711V5.28613C10.6742 5.19601 10.668 5.1014 10.6631 5.00684C10.2937 5.31191 9.80605 5.50995 9.26855 5.56152C9.17242 5.57073 9.07555 5.57501 8.97852 5.5752H8.97754C8.32401 5.57126 7.68403 5.38239 7.12793 5.02832ZM10.4365 4.7002C9.84445 4.59158 8.57195 4.42849 7.38574 4.73438C7.95916 5.07931 8.61209 5.23735 9.2334 5.17773C9.70471 5.13253 10.1258 4.96057 10.4365 4.7002ZM5.29199 1.34277C5.10934 1.75318 4.51247 3.28052 4.3623 4.66504C4.54485 4.54366 4.74015 4.44352 4.94531 4.36914C5.4074 4.2022 6.09846 4.10574 6.91016 4.47461C8.34837 3.97202 9.96176 4.21015 10.5918 4.33594C10.3903 3.04469 9.86359 1.71532 9.69336 1.33594L5.29199 1.34277Z" fill="#013D35" stroke="#013D35" stroke-width="0.1"/>
</svg>
      </div>
      <span style="font-size: 12px; color: #000; display: block; margin-top: 4px;">1.000 kr.</span>
    </div>
  </div>
</div>
</div>

  <!-- Cart Items -->
  <div class="cart-content" id="cartItemsContainer">
    <div
      style="
        padding: 40px 20px; text-align: center; color: #013D35; font-family: Poppins;
        font-size: 16px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
      "
    >
      <div
        style="
          font-size: 16px; font-family: Poppins;

          font-style: normal;
          font-weight: 400;
          line-height: normal;
        "
      >
        Indlæser kurv...
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div style="border-top: 1px solid #e5e5e5; padding: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
      <span
        style="
          font-weight: 400; color: #013D35; font-size: 22px; font-family: Poppins;

          font-style: normal;

          line-height: normal;
        "
        >Total</span
      >
      <span
        style="
          font-weight: 400; color: #013D35; font-size: 22px; font-family: Poppins;

          font-style: normal;

          line-height: normal;
        "
        id="cartTotal"
        >0,00 DKK</span
      >
    </div>

    <div
      style="
        font-size: 12px; color: #5A646B; text-align: center; margin-bottom: 20px; line-height: 1.4; font-family: Poppins;
        font-size: 12px;
        font-style: italic;
        font-weight: 400;
        line-height: normal;
      "
    >
      Moms inkluderet •
      <span
        style="
          color: #013D35; font-family: Poppins;
          font-size: 12px;
          font-style: italic;
          font-weight: 400;
          line-height: normal;
        "
        >Levering</span
      >
      udregnes ved check-val
    </div>

    <button
      onclick="window.location.href='/checkout'"
      style="
        width: 100%; background: #013D35; border: none; padding: 14px; font-size: 16px; font-weight: 600;  cursor: pointer; margin-bottom: 12px; color: #FFF;

        font-family: Poppins;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        letter-spacing: 1px;
      "
    >
      Kassen
    </button>

    <button
      onclick="closeSimpleCart()"
      style="
        width: 100%; background: #fff; border: 1px solid #013D35; padding: 12px; font-size: 14px;  cursor: pointer; color: #0A2D27;

        font-family: Poppins;
        font-size: 14px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        letter-spacing: 1px;
      "
    >
      Fortsæt med at shoppe
    </button>
  </div>
</div>

<div id="simpleOverlay" onclick="closeSimpleCart()"></div>

<script>
  // Cart functions
  function openSimpleCart() {
    console.log('🛒 Opening cart drawer...');
    document.getElementById('simpleCart').classList.add('open');
    document.getElementById('simpleOverlay').classList.add('active');
    document.body.style.overflow = 'hidden';
    loadCartData();
  }

  function closeSimpleCart() {
    console.log('🛒 Closing cart drawer...');
    document.getElementById('simpleCart').classList.remove('open');
    document.getElementById('simpleOverlay').classList.remove('active');
    document.body.style.overflow = 'auto';
  }

  // Load real cart data
  function loadCartData() {
    console.log('📦 Loading cart data from /cart.js...');

    fetch('/cart.js')
      .then((response) => {
        if (!response.ok) throw new Error('Network error');
        return response.json();
      })
      .then((cart) => {
        console.log('✅ Cart data loaded:', cart);
        updateCartDisplay(cart);
      })
      .catch((error) => {
        console.error('❌ Error loading cart:', error);
        showErrorState();
      });
  }

  // Update cart display with real data
  function updateCartDisplay(cart) {
    const container = document.getElementById('cartItemsContainer');
    const totalElement = document.getElementById('cartTotal');

    if (!cart.items || cart.items.length === 0) {
      container.innerHTML = `
            <div style="padding: 40px 20px; text-align: center; color: #666;">
                <div style="font-size: 16px; margin-bottom: 10px;">Din kurv er tom</div>
            </div>
        `;
      totalElement.textContent = '0,00 DKK';
      updateFreeShippingProgress(0);
      return;
    }

    console.log(`🔄 Displaying ${cart.items.length} items`);

    let html = '';
    cart.items.forEach((item) => {
      const imageUrl = item.image ? (item.image.includes('//') ? item.image : 'https:' + item.image) : '';
      const price = formatMoney(item.final_line_price || item.line_price || 0);
      // Escape HTML to prevent XSS
      const title = escapeHtml(item.product_title || item.title || 'Produkt');
      const variantTitle = item.variant_title ? escapeHtml(item.variant_title) : '';

      html += `
            <div style="padding: 20px;">
                <div style="display: flex; align-items: flex-start; gap: 15px;">
                    <div style="width: 80px; height: 80px; flex-shrink: 0; background: #f8f8f8; border-radius: 4px; overflow: hidden;">
                        ${
                          imageUrl
                            ? `<img src="${imageUrl}" alt="${title}" style="width: 100%; height: 100%; object-fit: cover;">`
                            : '<div style="width: 100%; height: 100%; background: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #666; font-size: 12px;">Ingen billede</div>'
                        }
                    </div>
                    <div style="flex: 1;">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 4px;">
                            <div style="font-weight: 600; color: #000; font-size: 15px; line-height: 1.3; flex: 1; padding-right: 10px;">${title}</div>
                            <div style="font-weight: 600; color: #000; font-size: 15px; white-space: nowrap;">${price}</div>
                        </div>
                        ${
                          variantTitle
                            ? `<div style="font-size: 13px; color: #666; margin-bottom: 12px; line-height: 1.3;">${variantTitle}</div>`
                            : ''
                        }
                        <div style="display: flex; align-items: center; gap: 16px;">
                        <div style="display: flex; align-items: center; height: 32px;">
    <button onclick="updateQuantity('${item.key}', ${item.quantity - 1})" 
            style="width: 32px; height: 32px; border: 1px solid #d0d0d0; background: white; border-right: none; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center; border-radius: 3px 0 0 3px;">-</button>
    
    <div style="width: 40px; height: 32px; border: 1px solid #d0d0d0;  display: flex; align-items: center; justify-content: center; font-size: 13px; background: white;">
        ${item.quantity}
    </div>
    
    <button onclick="updateQuantity('${item.key}', ${item.quantity + 1})" 
            style="width: 32px; height: 32px; border: 1px solid #d0d0d0; background: white; border-left: none; cursor: pointer; font-size: 16px; display: flex; align-items: center; justify-content: center; border-radius: 0 3px 3px 0;">+</button>
</div>
                            <button onclick="removeItem('${
                              item.key
                            }')" style="background: none; border: none; color: #013D35; cursor: pointer; padding: 4px 0; 
font-family: Poppins;
font-size: 14px;
font-style: normal;
font-weight: 400;
line-height: normal;">Remove</button>
                        </div>
                    </div>
                </div>
            </div>
        `;
    });

    container.innerHTML = html;
    totalElement.textContent = formatMoney(cart.total_price);
    updateFreeShippingProgress(cart.total_price);
  }

  // Update quantity with better error handling
  function updateQuantity(itemKey, newQuantity) {
    if (newQuantity < 1) {
      removeItem(itemKey);
      return;
    }

    const originalContent = document.getElementById('cartItemsContainer').innerHTML;
    
    fetch('/cart/change.js', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ id: itemKey, quantity: newQuantity }),
    })
      .then((response) => {
        if (!response.ok) throw new Error('Network error');
        return response.json();
      })
      .then((cart) => {
        updateCartDisplay(cart);
      })
      .catch((error) => {
        console.error('Error updating quantity:', error);
        // Restore original content on error
        document.getElementById('cartItemsContainer').innerHTML = originalContent;
        alert('Der opstod en fejl ved opdatering af antal. Prøv igen.');
      });
  }

  // Remove item with better error handling
  function removeItem(itemKey) {
    const originalContent = document.getElementById('cartItemsContainer').innerHTML;
    
    fetch('/cart/change.js', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ id: itemKey, quantity: 0 }),
    })
      .then((response) => {
        if (!response.ok) throw new Error('Network error');
        return response.json();
      })
      .then((cart) => {
        updateCartDisplay(cart);
      })
      .catch((error) => {
        console.error('Error removing item:', error);
        // Restore original content on error
        document.getElementById('cartItemsContainer').innerHTML = originalContent;
        alert('Der opstod en fejl ved fjernelse af varen. Prøv igen.');
      });
  }

  // Free shipping progress
  function updateFreeShippingProgress(cartTotal) {
    const FREE_SHIPPING_THRESHOLD = 50000; // 500 DKK in cents
    const MAX_DISPLAY = 100000; // 1000 DKK in cents
    
    // Calculate progress percentage (capped at 100%)
    let progressPercentage = (cartTotal / MAX_DISPLAY) * 100;
    if (progressPercentage > 100) progressPercentage = 100;
    
    const remaining = FREE_SHIPPING_THRESHOLD - cartTotal;

    const progressBar = document.getElementById('freeShippingProgress');
    const textElement = document.getElementById('freeShippingText');

    if (progressBar) progressBar.style.width = progressPercentage + '%';
    
    if (textElement) {
      if (cartTotal >= FREE_SHIPPING_THRESHOLD) {
        textElement.textContent = 'Gratis fragt opnået!';
        textElement.style.color = '#27ae60'; // Green color for success
      } else {
        textElement.textContent = `${formatMoney(remaining)} væk fra gratis fragt`;
        textElement.style.color = '#000'; // Default color
      }
    }
  }

  // Money formatting
  function formatMoney(cents) {
    return (
      (cents / 100).toLocaleString('da-DK', {
        minimumFractionDigits: 2,
        maximumFractionDigits: 2,
      }) + ' DKK'
    );
  }

  // HTML escaping function to prevent XSS
  function escapeHtml(unsafe) {
    return unsafe
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }

  // Error state
  function showErrorState() {
    const container = document.getElementById('cartItemsContainer');
    container.innerHTML = `
        <div style="padding: 40px 20px; text-align: center; color: #666;">
            <div style="font-size: 16px; margin-bottom: 10px;">Fejl ved indlæsning af kurv</div>
            <button onclick="loadCartData()" style="background: #000; color: white; border: none; padding: 10px 20px; border-radius: 3px; cursor: pointer;">
                Prøv igen
            </button>
        </div>
    `;
  }

  // Make functions global
  window.openSimpleCart = openSimpleCart;
  window.closeSimpleCart = closeSimpleCart;
  window.updateQuantity = updateQuantity;
  window.removeItem = removeItem;

  console.log('✅ Cart drawer with real data loaded');
</script>